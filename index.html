<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED é›»æµåˆ†æåœ–è¡¨</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            min-height: 100vh;
            position: relative;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .chart-container {
            background: #2a2a3e;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .chart-wrapper {
            position: relative;
            height: 400px;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        button {
            background: #2a2a3e;
            border: 2px solid #667eea;
            color: #fff;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            background: #3a3a4e;
        }
        button.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .stat-card {
            background: #2a2a3e;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            border: 1px solid #3a3a4e;
        }
        .stat-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #fff;
        }
        .stat-label {
            color: #aaa;
            font-size: 0.9em;
            margin-top: 5px;
        }
        table {
            width: 100%;
            background: #2a2a3e;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-top: 30px;
        }
        th, td {
            padding: 15px;
            text-align: left;
            color: #fff;
        }
        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        tr:nth-child(even) {
            background: #3a3a4e;
        }
        .color-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
            vertical-align: middle;
            border: 2px solid #555;
        }
        .author-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(42, 42, 62, 0.95);
            color: #fff;
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #667eea;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            font-size: 14px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        .author-badge strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
        }
        .author-badge .warning {
            color: #ff6b6b;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="author-badge">
        <strong>ğŸ‘¤ ä½œè€…ï¼šæ—ä¿é™½</strong>
        <div class="warning">âš ï¸ è«‹å‹¿ç›œç«Š</div>
    </div>
    
    <div class="container">
        <h1>ğŸ“Š LED é›»æµæ¸¬é‡åˆ†æ</h1>
        
        <div class="controls">
            <button onclick="showChart('line')" class="active" id="btnLine">ç·šåœ–</button>
            <button onclick="showChart('bar')" id="btnBar">æŸ±ç‹€åœ–</button>
            <button onclick="showChart('radar')" id="btnRadar">é›·é”åœ–</button>
            <button onclick="showChart('scatter')" id="btnScatter">æ•£é»åœ–</button>
        </div>

        <div class="chart-container">
            <div class="chart-wrapper">
                <canvas id="mainChart"></canvas>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>æœ€é«˜é›»æµ</h3>
                <div class="stat-value">5.66 mA</div>
                <div class="stat-label">é»ƒè‰² LED (570nm)</div>
            </div>
            <div class="stat-card">
                <h3>æœ€ä½é›»æµ</h3>
                <div class="stat-value">1.69 mA</div>
                <div class="stat-label">æ·±è— LED (450nm)</div>
            </div>
            <div class="stat-card">
                <h3>é›»æµç¯„åœ</h3>
                <div class="stat-value">3.97 mA</div>
                <div class="stat-label">å·®ç•° 235%</div>
            </div>
            <div class="stat-card">
                <h3>å¹³å‡é›»æµ</h3>
                <div class="stat-value">3.66 mA</div>
                <div class="stat-label">6è‰²å¹³å‡å€¼</div>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>LED é¡è‰²</th>
                    <th>æ³¢é•· (nm)</th>
                    <th>å¹³å‡é›»æµ (mA)</th>
                    <th>æœ€å°å€¼ (mA)</th>
                    <th>æœ€å¤§å€¼ (mA)</th>
                    <th>æ¨™æº–å·®</th>
                </tr>
            </thead>
            <tbody id="dataTable"></tbody>
        </table>
    </div>

    <script>
        // åŸå§‹æ•¸æ“š
        const rawData = {
            red: [4.51, 4.51, 4.52, 4.51, 4.51, 4.50, 4.51, 4.51, 4.50, 4.50, 4.50, 4.50],
            green: [3.64, 3.64, 3.64, 3.64, 3.63, 3.64, 3.63, 3.63, 3.63, 3.63, 3.62, 3.62],
            blue: [3.79, 3.79, 3.79, 3.80, 3.79, 3.80, 3.80, 3.78, 3.78, 3.78, 3.78, 3.77],
            yellow: [5.68, 5.68, 5.68, 5.67, 5.67, 5.67, 5.65, 5.65, 5.65, 5.65, 5.64, 5.64],
            darkBlue: [1.65, 1.67, 1.68, 1.68, 1.68, 1.69, 1.70, 1.70, 1.70, 1.70, 1.70, 1.70],
            purple: [3.25, 3.26, 3.26, 3.26, 3.26, 3.26, 3.25, 3.25, 3.25, 3.25, 3.25, 3.24]
        };

        // LED è³‡è¨Š
        const ledInfo = [
            { name: 'ç´…è‰²', nameEn: 'red', wavelength: 650, color: '#FF0000' },
            { name: 'ç¶ è‰²', nameEn: 'green', wavelength: 535, color: '#00FF00' },
            { name: 'è—è‰²', nameEn: 'blue', wavelength: 470, color: '#87CEEB' },
            { name: 'é»ƒè‰²', nameEn: 'yellow', wavelength: 570, color: '#FFFF00' },
            { name: 'æ·±è—', nameEn: 'darkBlue', wavelength: 450, color: '#00008B' },
            { name: 'ç´«è‰²', nameEn: 'purple', wavelength: 400, color: '#9370DB' }
        ];

        // è¨ˆç®—çµ±è¨ˆå€¼
        function calculateStats(data) {
            const avg = data.reduce((a, b) => a + b, 0) / data.length;
            const max = Math.max(...data);
            const min = Math.min(...data);
            const variance = data.reduce((sum, val) => sum + Math.pow(val - avg, 2), 0) / data.length;
            const stdDev = Math.sqrt(variance);
            return { avg, max, min, stdDev };
        }

        // æº–å‚™åœ–è¡¨æ•¸æ“š
        const chartData = ledInfo.map(led => {
            const stats = calculateStats(rawData[led.nameEn]);
            return {
                name: led.name,
                wavelength: led.wavelength,
                current: stats.avg,
                color: led.color,
                stats: stats
            };
        });

        // æ’åºï¼ˆæŒ‰æ³¢é•·ï¼‰
        chartData.sort((a, b) => a.wavelength - b.wavelength);

        let currentChart = null;

        function showChart(type) {
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn' + type.charAt(0).toUpperCase() + type.slice(1)).classList.add('active');

            // éŠ·æ¯€èˆŠåœ–è¡¨
            if (currentChart) {
                currentChart.destroy();
            }

            const ctx = document.getElementById('mainChart').getContext('2d');

            const config = {
                type: type,
                data: {
                    labels: type === 'scatter' ? undefined : chartData.map(d => d.name),
                    datasets: type === 'scatter' ? [{
                        label: 'é›»æµ vs æ³¢é•·',
                        data: chartData.map(d => ({ x: d.wavelength, y: d.current })),
                        backgroundColor: chartData.map(d => d.color),
                        borderColor: chartData.map(d => d.color),
                        pointRadius: 10,
                        pointHoverRadius: 12
                    }] : [{
                        label: 'é›»æµ (mA)',
                        data: chartData.map(d => d.current),
                        backgroundColor: chartData.map(d => d.color + 'CC'),
                        borderColor: chartData.map(d => d.color),
                        borderWidth: 2,
                        fill: type === 'radar',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                font: { size: 14 },
                                padding: 15,
                                color: '#fff'
                            }
                        },
                        title: {
                            display: true,
                            text: type === 'scatter' ? 'æ³¢é•· vs é›»æµé—œä¿‚' : 'LED é›»æµæ¸¬é‡çµæœ',
                            font: { size: 18, weight: 'bold' },
                            padding: 20,
                            color: '#fff'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (type === 'scatter') {
                                        return `æ³¢é•·: ${context.parsed.x}nm, é›»æµ: ${context.parsed.y.toFixed(3)}mA`;
                                    }
                                    return `é›»æµ: ${context.parsed.y.toFixed(3)} mA`;
                                }
                            }
                        }
                    },
                    scales: type === 'radar' ? {
                        r: {
                            beginAtZero: true,
                            max: 6,
                            ticks: { color: '#fff' },
                            grid: { color: '#444' },
                            pointLabels: { color: '#fff' }
                        }
                    } : type === 'scatter' ? {
                        x: {
                            title: {
                                display: true,
                                text: 'æ³¢é•· (nm)',
                                font: { size: 14, weight: 'bold' },
                                color: '#fff'
                            },
                            ticks: { color: '#fff' },
                            grid: { color: '#444' }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'é›»æµ (mA)',
                                font: { size: 14, weight: 'bold' },
                                color: '#fff'
                            },
                            beginAtZero: true,
                            ticks: { color: '#fff' },
                            grid: { color: '#444' }
                        }
                    } : {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'é›»æµ (mA)',
                                font: { size: 14, weight: 'bold' },
                                color: '#fff'
                            },
                            ticks: { color: '#fff' },
                            grid: { color: '#444' }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'LED é¡è‰²',
                                font: { size: 14, weight: 'bold' },
                                color: '#fff'
                            },
                            ticks: { color: '#fff' },
                            grid: { color: '#444' }
                        }
                    }
                }
            };

            currentChart = new Chart(ctx, config);
        }

        // å¡«å……æ•¸æ“šè¡¨æ ¼
        function fillTable() {
            const tbody = document.getElementById('dataTable');
            tbody.innerHTML = '';
            
            chartData.forEach(led => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>
                        <span class="color-indicator" style="background-color: ${led.color}"></span>
                        ${led.name}
                    </td>
                    <td>${led.wavelength}</td>
                    <td>${led.current.toFixed(3)}</td>
                    <td>${led.stats.min.toFixed(2)}</td>
                    <td>${led.stats.max.toFixed(2)}</td>
                    <td>${led.stats.stdDev.toFixed(4)}</td>
                `;
            });
        }

        // åˆå§‹åŒ–
        showChart('line');
        fillTable();
    </script>
</body>
</html>
